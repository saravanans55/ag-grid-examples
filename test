import { Component } from '@angular/core';
import { AgFilterComponent } from '@ag-grid-community/angular';

@Component({
  selector: 'app-year-filter',
  template: `
    <input
      type="number"
      class="ag-filter-filter"
      [(ngModel)]="year"
      (ngModelChange)="onChange()"
      placeholder="Year..."
      min="0"
    />
  `,
})
export class YearFilterComponent implements AgFilterComponent {
  private params: any;
  year: number | null = null;

  agInit(params: any): void {
    this.params = params;
  }

  onChange(): void {
    if (this.year !== null) {
      this.params.filterChangedCallback();
    }
  }

  isFilterActive(): boolean {
    return this.year !== null;
  }

  doesFilterPass(params: any): boolean {
    return this.year === null || params.data.year === this.year;
  }

  getModel(): any {
    return { year: this.year };
  }

  setModel(model: any): void {
    this.year = model ? model.year : null;
  }

  ngOnDestroy(): void {}
}
