import { Component } from '@angular/core';
import { IFilterParams, IDoesFilterPassParams, IFilterComp } from 'ag-grid-community';

@Component({
  selector: 'app-custom-filter',
  template: `
    <div>
      <!-- Your custom filter UI -->
      <button (click)="onApply()">Apply</button>
    </div>
  `
})
export class CustomFilterComponent implements IFilterComp {
  private params: IFilterParams;

  agInit(params: IFilterParams): void {
    this.params = params;
  }

  doesFilterPass(params: IDoesFilterPassParams): boolean {
    // Implement your filtering logic
    return true;
  }

  isFilterActive(): boolean {
    // Implement your active check logic
    return false;
  }

  onApply() {
    // Apply your filtering logic
    this.params.filterChangedCallback();

    // Close the filter popup
    (this.params as any).api.getFilterInstance(this.params.column.getColId(), (filterInstance) => {
      if (filterInstance && filterInstance.gui) {
        const ePopup = filterInstance.gui.querySelector('.ag-popup');
        if (ePopup) {
          ePopup.parentElement.removeChild(ePopup);
        }
      }
    });
  }

  getModel() {
    // Implement your model logic
    return null;
  }

  setModel(model: any): void {
    // Implement your model logic
  }
}
