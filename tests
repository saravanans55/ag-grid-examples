// Define a custom aggregation function
function customAggregator(params) {
  if (!params.node || !params.node.childrenAfterFilter) {
    return null; // Handle the case where there are no child nodes or undefined node
  }

  // Get all the child nodes under the parent node
  const childNodes = params.node.childrenAfterFilter;

  // Check if all child nodes have the same value for the column
  const allValuesSame = childNodes.every(node => node.data[params.column.getId()] === childNodes[0].data[params.column.getId()]);

  // If all values are the same, return the value; otherwise, return a placeholder value (e.g., "-")
  return allValuesSame ? childNodes[0].data[params.column.getId()] : "-";
}


function getNestedProperty(obj, propertyPath) {
  const properties = propertyPath.split('.');

  // Use a loop to handle both direct fields and nested object properties
  let value = obj;
  for (const property of properties) {
    if (value && value.hasOwnProperty(property)) {
      value = value[property];
    } else {
      return undefined;
    }
  }

  return value;
}


// Configure ag-Grid column definitions
const columnDefs = [
  {
    headerName: "College",
    field: "college",
    rowGroup: true,
  },
  {
    headerName: "Country",
    field: "country",
    valueGetter: "data.country", // Specify a valueGetter to access the aggregated value
    aggFunc: customAggregator,  // Use the custom aggregator
  },
  {
    headerName: "State",
    field: "state",
    valueGetter: "data.state", // Specify a valueGetter to access the aggregated value
    aggFunc: customAggregator,  // Use the custom aggregator
  },
  {
    headerName: "City",
    field: "city",
  },
];

// Rest of your ag-Grid configuration
const gridOptions = {
  // ...
};


1. Display identical child values within the primary column, excluding any differing child col values.

2. Display the accurate opportunity count in the parent column:
   - Aggregate identical sub fee types of opportunities into a single opportunity.
   - Present this precise value at the parent level.
   - Enable link navigation on the column of "Opportunity Name", applicable within row grouping.
Show opp.count not the row count.

3. On the Opp.name, provide direct link & when they click on the link it will navigate to opp.edit page.

4. Conceal the "Export all" option and reveal the "Export" button.
   Note: This functionality will become available once roles and access permissions are implemented.
